!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("jquery"),require("window")):"function"==typeof define&&define.amd?define("isInViewport",["jquery","window"],n):n(e.$,e.window)}(this,function(w,h){"use strict";function v(e,n){var t=e.getBoundingClientRect(),o=t.top,r=t.bottom,i=t.left,a=t.right,u=w.extend({tolerance:0,viewport:h},n),c=!1,f=u.viewport.jquery?u.viewport:w(u.viewport);f.length||(console.warn("isInViewport: The viewport selector you have provided matches no element on page."),console.warn("isInViewport: Defaulting to viewport as window"),f=w(h));var d=f.height(),l=f.width(),s=f[0].toString();if(f[0]!==h&&"[object Window]"!==s&&"[object DOMWindow]"!==s){var p=f[0].getBoundingClientRect();o-=p.top,r-=p.top,i-=p.left,a-=p.left,l-=v.scrollBarWidth=v.scrollBarWidth||function(e){var n=w("<div></div>").css({width:"100%"});e.append(n);var t=e.width()-n.width();return n.remove(),t}(f)}return u.tolerance=~~Math.round(parseFloat(u.tolerance)),u.tolerance<0&&(u.tolerance=d+u.tolerance),a<=0||l<=i?c:c=u.tolerance?o<=u.tolerance&&r>=u.tolerance:0<r&&o<=d}function o(e){if(e){var n=e.split(",");return 1===n.length&&isNaN(n[0])&&(n[1]=n[0],n[0]=void 0),{tolerance:n[0]?n[0].trim():void 0,viewport:n[1]?w(n[1].trim()):void 0}}return{}}w="default"in w?w.default:w,h="default"in h?h.default:h,w.extend(w.expr[":"],{"in-viewport":w.expr.createPseudo?w.expr.createPseudo(function(n){return function(e){return v(e,o(n))}}):function(e,n,t){return v(e,o(t[3]))}}),w.fn.isInViewport=function(t){return this.filter(function(e,n){return v(n,t)})},w.fn.run=function(e){var t=this;if(1===arguments.length&&"function"==typeof e&&(e=[e]),!(e instanceof Array))throw new SyntaxError("isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions");return e.forEach(function(n){"function"!=typeof n?(console.warn("isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions"),console.warn("isInViewport: Ignoring non-function values in array and moving on")):[].slice.call(t).forEach(function(e){return n.call(w(e))})}),this}});